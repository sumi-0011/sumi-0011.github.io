---
date: 2021-10-07  18:35 +0800

title: Computer Graphics - ì‹¤ìŠµ 3ì£¼ì°¨

comments: true
categories:
  - CG
tags:
  - CG
---

---

## sobel filter

- 1D ë¯¸ë¶„ í•„í„°ì™€ blurë¥¼ ì£¼ëŠ” í•„í„°ë¥¼ convolution ì—°ì‚°ì„ í†µí•´ ì–»ì€ê²ƒ
- ì´ë¯¸ì§€ì˜ ìˆ˜ì§, ìˆ˜í‰ íŠ¹ì§•ì„ ì¶”ì¶œí•˜ëŠ” í•„í„°ì´ë‹¤.

### sobel filter ì‹¤ìŠµ

#### get_soble()ë©”ì†Œë“œ : sobel mask ìƒì„±

```
def get_sobel():
    derivative = np.array([[-1,0,1]])
    blur = np.array([[1],[2],[1]])

    x = np.dot(blur,derivative)
    y = np.dot(derivative.T,blur.T)
    return x,y
```

#### sobel filter main

```

if __name__ == '__main__':
    src = cv2.imread('../image/edge_detection_img.png', cv2.IMREAD_GRAYSCALE)

    sobel_x,sobel_y = get_sobel()

    dst_x = my_filtering(src, sobel_x, 'zero')
    dst_y = my_filtering(src, sobel_y, 'zero')
    dst = np.hypot(dst_x,dst_y)

    # 0~1 ì‚¬ì´ì˜ ê°’ìœ¼ë¡œ ë³€ê²½ í›„ 0~255ë¡œ ë³€ê²½
    dst_x_Norm = ((dst_x - np.min(dst_x))/np.max(dst_x-np.min(dst_x))*255+0.5).astype(np.uint8)
    dst_y_Norm = ((dst_y - np.min(dst_y))/np.max(dst_y-np.min(dst_y))*255+0.5).astype(np.uint8)

    dst_x2 = np.sqrt(dst_x**2)
    dst_y2 = np.sqrt(dst_y**2)

    cv2.imshow('src', src)
    cv2.imshow('dst_x ', dst_x)
    cv2.imshow('dst_y ', dst_y)
    cv2.imshow('dst_x2 ', dst_x2)
    cv2.imshow('dst_y2 ', dst_y2)
    cv2.imshow('dst_x_Norm', dst_x_Norm)
    cv2.imshow('dst_y_Norm ', dst_y_Norm)


    cv2.waitKey()
    cv2.destroyAllWindows()
```

![image](https://user-images.githubusercontent.com/49177223/136368333-24f86171-de36-44ba-980a-5b9381c7dbe7.png)

- dst_x -> dst_x_Norm
  - ë°ì´í„° íƒ€ì…ì˜ ë³€í™”
  - float -> int
- np.sqrt(sobel_x**2 + sobel_y**2) ì´ë ‡ê²Œ í•©ì¹˜ê¸°!

---

## DoG (Derivative of Gaussian)

- ê°€ìš°ì‹œí•œ í•„í„° í›„ ë¯¸ë¶„ í•„í„°ë¥¼ ì ìš©
- ê°€ìš°ì‹œì•ˆ í•„í„°ë¥¼ ë¨¼ì € ë¯¸ë¶„í•˜ê³  ì—°ì‚°í•˜ë©´ 2ë²ˆ í•„í„°ë§ í• ê²ƒì´ 1ë²ˆ í•„í„°ë§ìœ¼ë¡œ ì¤„ì–´ë“ ë‹¤.

### ìˆ˜í–‰ì ˆì°¨

![image-20211007194653688](C:\Users\selin\AppData\Roaming\Typora\typora-user-images\image-20211007194653688.png)

### get_DoG_filter : DoG maskìƒì„±

```
def get_DoG_filter(fsize,sigma=1):
    #TODO
    #DoG maskì™„ì„±

    y,x = np.mgrid[-(fsize//2):(fsize//2)+1,-(fsize//2):(fsize//2)+1]

    DoG_x = (-x/sigma**2) *np.exp(-((x**2 + y**2)/(2*sigma**2)))
    DoG_y = (-y/sigma**2) *np.exp(-((x**2 + y**2)/(2*sigma**2)))

    return DoG_x,DoG_y
```

### DoG main

```
def main():
    src = cv2.imread('../image/Lena.png', cv2.IMREAD_GRAYSCALE)

    #DoG mask ìƒì„±.
    DoG_x, DoG_y = get_DoG_filter(fsize=3,sigma=1)

    dst_x = my_filtering(src, DoG_x, 'zero')     # ğ·ğ‘œğº(x) = ğºâ€²(ğ‘¥) âˆ— ğ¼
    dst_y = my_filtering(src, DoG_y, 'zero')     # ğ·ğ‘œğº(y) = ğºâ€²(y) âˆ— ğ¼


    # ğ·ğ‘œğº ğ‘¥ ,ğ·ğ‘œğº(ğ‘¦)ì˜ magnitudeë¥¼ ê³„ì‚°.
    dst = np.sqrt(dst_x**2+dst_y**2)
    print('dst',dst)
    print('dst/255' ,dst/255)

    # 0~1 ì‚¬ì´ì˜ ê°’ìœ¼ë¡œ ë³€ê²½ í›„ 0~255ë¡œ ë³€ê²½
    dst = ((dst - np.min(dst))/np.max(dst-np.min(dst))*255+0.5).astype(np.uint8)
    print('dst',dst)

    cv2.imshow('dst_x', dst_x/255)
    cv2.imshow('dst_y ', dst_y/255)
    cv2.imshow('dst ', dst)

    cv2.waitKey()
    cv2.destroyAllWindows()
```

#### ê²°ê³¼

![image](https://user-images.githubusercontent.com/49177223/136378029-575a01eb-8122-4765-b851-91da18e0e5fa.png)

```
ê²°ê³¼
dst_x : ìˆ˜ì§ íŠ¹ì§•ì„ ì¶”ì¶œ
dst_y : ìˆ˜í‰ íŠ¹ì§•ì„ ì¶”ì¶œ
dst = ìˆ˜í‰ + ìˆ˜ì§ => dst_x + dst_yì„ ë‹¨ìˆœíˆ í•˜ë©´ ì•ˆë˜ê³ !!
		ê±°ë¦¬ êµ¬í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ np.sqrt(dst_x**2+dst_y**2) ì´ëŸ° ì‹ìœ¼ë¡œ êµ¬í•´ì•¼ í•œë‹¤.

dst =  np.sqrt(dst_x**2+dst_y**2)
```

- dstë¥¼ ì´ë¯¸ì§€ë¡œ ì¶œë ¥í• ë•Œ 0-1ì´ë‚˜ 0-255ë¡œ ë°”ê¾¸ì–´ ì£¼ì–´ì•¼ í•œë‹¤.

```
dst = np.sqrt(dst_x**2+dst_y**2)
print(dst)
print(dst/255)

dst = ((dst - np.min(dst))/np.max(dst-np.min(dst)) * 255+0.5).astype(np.uint8)
print(dst)
```

ìœ„ì˜ ê²°ê³¼ console

![image](https://user-images.githubusercontent.com/49177223/136381662-cebb4773-dda8-471f-9473-38d47021e535.png)

- ë§¨ ì²˜ìŒì€ ì›ë˜ dstê°’ <- intë„ floatë„ ì•„ë‹Œê°’
- dst/255ë¥¼ í•´ì¤€í›„ì— imshow()ë¥¼ í•´ì•¼ í•œë‹¤.
- ë˜ëŠ” `dst = ((dst - np.min(dst))/np.max(dst-np.min(dst)) * 255+0.5).astype(np.uint8)`
- 0~1 ì‚¬ì´ì˜ ê°’ìœ¼ë¡œ ë³€ê²½ í›„ 0~255ë¡œ ë³€ê²½
